function getCookie(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function bx_rcm_recommendation_event_attaching(t){return null}function bx_rcm_adaptive_recommendation_event_attaching(t,e){var s=function(e){var s,i=BX(this);for(s in t)if(t[s].productUrl==i.getAttribute("href")){window.JCCatalogBigdataProducts.prototype.RememberProductRecommendation(t[s].recommendationId,t[s].productId);break}},i=BX(e);i||(i=document.body);var o=BX.findChildren(i,{tag:"a"},!0);if(o){var a;for(a in o)BX.bind(o[a],"click",s)}}function bx_rcm_get_from_cloud(t,e,s){var i="https://analytics.bitrix.info/crecoms/v1_0/recoms.php",o=BX.ajax.prepareData(e);o&&(i+=(-1!==i.indexOf("?")?"&":"?")+o);var a=function(e){e.items||(e.items=[]),BX.ajax({url:"/bitrix/components/bitrix/catalog.bigdata.products/ajax.php?"+BX.ajax.prepareData({AJAX_ITEMS:e.items,RID:e.id}),method:"POST",data:s,dataType:"html",processData:!1,start:!0,onsuccess:function(e){var s=BX.processHTML(e);BX(t).innerHTML=s.HTML,BX.ajax.processScripts(s.SCRIPT),InitFlexSlider()}})};BX.ajax({method:"GET",dataType:"json",url:i,timeout:3,onsuccess:a,onfailure:a})}!function(t){if(!t.JCCatalogBigdataProducts){var e=function(t){e.superclass.constructor.apply(this,arguments),this.nameNode=BX.create("span",{props:{className:"bx_medium bx_bt_button",id:this.id},text:t.text}),this.buttonNode=BX.create("span",{attrs:{className:t.ownerClass},style:{marginBottom:"0",borderBottom:"0 none transparent"},children:[this.nameNode],events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(e,BX.PopupWindowButton),t.JCCatalogBigdataProducts=function(t){if(this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,this.visual=t.VISUAL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID),this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL)),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogBigdataProducts.prototype.Init=function(){var e=0,s="",i=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.obPrice=BX(this.visual.PRICE_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),s=this.visual.TREE_ITEM_ID,e=0;e<this.treeProps.length;e++)if(this.obTreeRows[e]={LEFT:BX(s+this.treeProps[e].ID+"_left"),RIGHT:BX(s+this.treeProps[e].ID+"_right"),LIST:BX(s+this.treeProps[e].ID+"_list"),CONT:BX(s+this.treeProps[e].ID+"_cont")},!(this.obTreeRows[e].LEFT&&this.obTreeRows[e].RIGHT&&this.obTreeRows[e].LIST&&this.obTreeRows[e].CONT)){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:if(i=BX.findChildren(this.obTree,{tagName:"li"},!0),i&&0<i.length)for(e=0;e<i.length;e++)BX.bind(i[e],"click",BX.delegate(this.SelectOfferProp,this));for(e=0;e<this.obTreeRows.length;e++)BX.bind(this.obTreeRows[e].LEFT,"click",BX.delegate(this.RowLeft,this)),BX.bind(this.obTreeRows[e].RIGHT,"click",BX.delegate(this.RowRight,this));this.SetCurrent()}this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.delegate(this.Basket,this)),this.lastElement&&(this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0),this.setHeight(),BX.bind(t,"resize",BX.delegate(this.checkHeight,this)),BX.bind(this.obProduct.parentNode,"mouseover",BX.delegate(this.setHeight,this)),BX.bind(this.obProduct.parentNode,"mouseout",BX.delegate(this.clearHeight,this)))}},t.JCCatalogBigdataProducts.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCCatalogBigdataProducts.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCCatalogBigdataProducts.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCCatalogBigdataProducts.prototype.QuantityUp=function(){var t=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(e=!1),e&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogBigdataProducts.prototype.QuantityDown=function(){var t=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,t<this.stepQuantity&&(e=!1),e&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogBigdataProducts.prototype.QuantityChange=function(){var t=0,e=!0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&(t>this.maxQuantity?(e=!1,t=this.maxQuantity):t<this.stepQuantity&&(e=!1,t=this.stepQuantity)),e||(this.obQuantity.value=t))):this.obQuantity.value=this.stepQuantity)},t.JCCatalogBigdataProducts.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(BX.addClass(this.obBuyBtn,"bx_bt_button"),BX.removeClass(this.obBuyBtn,"bx_bt_button_type_2"),this.obBuyBtn.innerHTML=BX.message("CBD_MESS_BTN_BUY")):(BX.addClass(this.obBuyBtn,"bx_bt_button_type_2"),BX.removeClass(this.obBuyBtn,"bx_bt_button"),this.obBuyBtn.innerHTML=BX.message("CBD_MESS_NOT_AVAILABLE")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity.value=this.stepQuantity,this.obQuantity.disabled=!this.canBuy,this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))))},t.JCCatalogBigdataProducts.prototype.SelectOfferProp=function(){var t=0,e="",s="",i=[],o=null,a=BX.proxy_context;if(a&&a.hasAttribute("data-treevalue")&&(s=a.getAttribute("data-treevalue"),i=s.split("_"),this.SearchOfferPropIndex(i[0],i[1])&&(o=BX.findChildren(a.parentNode,{tagName:"li"},!1),o&&0<o.length)))for(t=0;t<o.length;t++)e=o[t].getAttribute("data-onevalue"),e===i[1]?BX.addClass(o[t],"bx_active"):BX.removeClass(o[t],"bx_active")},t.JCCatalogBigdataProducts.prototype.SearchOfferPropIndex=function(t,e){var s,i,o="",a=!1,r=[],h=-1,n={},u=[];for(s=0;s<this.treeProps.length;s++)if(this.treeProps[s].ID===t){h=s;break}if(h>-1){for(s=0;h>s;s++)o="PROP_"+this.treeProps[s].ID,n[o]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,a=this.GetRowValues(n,o),!a)return!1;if(!BX.util.in_array(e,a))return!1;for(n[o]=e,s=h+1;s<this.treeProps.length;s++){if(o="PROP_"+this.treeProps[s].ID,a=this.GetRowValues(n,o),!a)return!1;if(this.showAbsent)for(r=[],u=[],u=BX.clone(n,!0),i=0;i<a.length;i++)u[o]=a[i],this.GetCanBuy(u)&&(r[r.length]=a[i]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?n[o]=this.selectedValues[o]:n[o]=r[0],this.UpdateRow(s,n[o],a,r)}this.selectedValues=n,this.ChangeInfo()}return!0},t.JCCatalogBigdataProducts.prototype.RowLeft=function(){var t=0,e="",s=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(e=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===e){s=t;break}s>-1&&this.treeRowShowSize<this.showCount[s]&&(0>this.showStart[s]&&(this.showStart[s]++,BX.adjust(this.obTreeRows[s].LIST,{style:{marginLeft:20*this.showStart[s]+"%"}}),BX.adjust(this.obTreeRows[s].RIGHT,{style:this.treeEnableArrow})),0<=this.showStart[s]&&BX.adjust(this.obTreeRows[s].LEFT,{style:this.treeDisableArrow}))}},t.JCCatalogBigdataProducts.prototype.RowRight=function(){var t=0,e="",s=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(e=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===e){s=t;break}s>-1&&this.treeRowShowSize<this.showCount[s]&&(this.treeRowShowSize-this.showStart[s]<this.showCount[s]&&(this.showStart[s]--,BX.adjust(this.obTreeRows[s].LIST,{style:{marginLeft:20*this.showStart[s]+"%"}}),BX.adjust(this.obTreeRows[s].LEFT,{style:this.treeEnableArrow})),this.treeRowShowSize-this.showStart[s]>=this.showCount[s]&&BX.adjust(this.obTreeRows[s].RIGHT,{style:this.treeDisableArrow}))}},t.JCCatalogBigdataProducts.prototype.UpdateRow=function(t,e,s,i){var o=0,a=0,r="",h=0,n="",u={},c=!1,l=!1,d=!1,p=0,P=this.treeEnableArrow,b=this.treeEnableArrow,f=0,B=null;if(t>-1&&t<this.obTreeRows.length&&(B=BX.findChildren(this.obTreeRows[t].LIST,{tagName:"li"},!1),B&&0<B.length)){for(c="PICT"===this.treeProps[t].SHOW_MODE,h=s.length,l=this.treeRowShowSize<h,n=l?100/h+"%":"20%",u={props:{className:""},style:{width:n}},c&&(u.style.paddingTop=n),o=0;o<B.length;o++)r=B[o].getAttribute("data-onevalue"),d=r===e,BX.util.in_array(r,i)?u.props.className=d?"bx_active":"":u.props.className=d?"bx_active bx_missing":"bx_missing",u.style.display="none",BX.util.in_array(r,s)&&(u.style.display="",d&&(p=a),a++),BX.adjust(B[o],u);u={style:{width:(l?20*h:100)+"%",marginLeft:"0%"}},c?BX.adjust(this.obTreeRows[t].CONT,{props:{className:l?"bx_item_detail_scu full":"bx_item_detail_scu"}}):BX.adjust(this.obTreeRows[t].CONT,{props:{className:l?"bx_item_detail_size full":"bx_item_detail_size"}}),l?(p+1===h&&(b=this.treeDisableArrow),this.treeRowShowSize<=p&&(f=this.treeRowShowSize-p-1,u.style.marginLeft=20*f+"%"),0===f&&(P=this.treeDisableArrow),BX.adjust(this.obTreeRows[t].LEFT,{style:P}),BX.adjust(this.obTreeRows[t].RIGHT,{style:b})):(BX.adjust(this.obTreeRows[t].LEFT,{style:{display:"none"}}),BX.adjust(this.obTreeRows[t].RIGHT,{style:{display:"none"}})),BX.adjust(this.obTreeRows[t].LIST,u),this.showCount[t]=h,this.showStart[t]=f}},t.JCCatalogBigdataProducts.prototype.GetRowValues=function(t,e){var s,i=0,o=[],a=!1,r=!0;if(0===t.length){for(i=0;i<this.offers.length;i++)BX.util.in_array(this.offers[i].TREE[e],o)||(o[o.length]=this.offers[i].TREE[e]);a=!0}else for(i=0;i<this.offers.length;i++){r=!0;for(s in t)if(t[s]!==this.offers[i].TREE[s]){r=!1;break}r&&(BX.util.in_array(this.offers[i].TREE[e],o)||(o[o.length]=this.offers[i].TREE[e]),a=!0)}return a?o:!1},t.JCCatalogBigdataProducts.prototype.GetCanBuy=function(t){var e,s=0,i=!1,o=!0;for(s=0;s<this.offers.length;s++){o=!0;for(e in t)if(t[e]!==this.offers[s].TREE[e]){o=!1;break}if(o&&this.offers[s].CAN_BUY){i=!0;break}}return i},t.JCCatalogBigdataProducts.prototype.SetCurrent=function(){var t=0,e=0,s=[],i="",o=!1,a={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(i="PROP_"+this.treeProps[t].ID,o=this.GetRowValues(a,i),o);t++){if(BX.util.in_array(h[i],o)?a[i]=h[i]:(a[i]=o[0],this.offerNum=0),this.showAbsent)for(s=[],r=[],r=BX.clone(a,!0),e=0;e<o.length;e++)r[i]=o[e],this.GetCanBuy(r)&&(s[s.length]=o[e]);else s=o;this.UpdateRow(t,a[i],o,s)}this.selectedValues=a,this.ChangeInfo()},t.JCCatalogBigdataProducts.prototype.ChangeInfo=function(){var t,e=0,s=-1,i={},o=!0,a="";for(e=0;e<this.offers.length;e++){o=!0;for(t in this.selectedValues)if(this.selectedValues[t]!==this.offers[e].TREE[t]){o=!1;break}if(o){s=e;break}}s>-1&&(this.obPict&&(this.offers[s].PREVIEW_PICTURE?BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.offers[s].PREVIEW_PICTURE.SRC+")"}}):BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.secondPict&&this.obSecondPict&&(this.offers[s].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[s].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[s].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[s].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[s].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[s].DISPLAY_PROPERTIES})),this.obPrice&&(a=this.offers[s].PRICE.PRINT_DISCOUNT_VALUE,this.showOldPrice&&this.offers[s].PRICE.DISCOUNT_VALUE!==this.offers[s].PRICE.VALUE&&(a+=" <span>"+this.offers[s].PRICE.PRINT_VALUE+"</span>"),BX.adjust(this.obPrice,{html:a}),this.showPercent&&(i=this.offers[s].PRICE.DISCOUNT_VALUE!==this.offers[s].PRICE.VALUE?{style:{display:""},html:this.offers[s].PRICE.DISCOUNT_DIFF_PERCENT}:{style:{display:"none"},html:""},this.obDscPerc&&BX.adjust(this.obDscPerc,i),this.obSecondDscPerc&&BX.adjust(this.obSecondDscPerc,i))),this.offerNum=s,this.QuantitySet(this.offerNum))},t.JCCatalogBigdataProducts.prototype.InitBasketUrl=function(){switch(this.productType){case 1:case 2:this.basketUrl=this.product.addUrl;break;case 3:this.basketUrl=this.offers[this.offerNum].ADD_URL}this.basketParams={ajax_basket:"Y",rcm:"yes"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value)},t.JCCatalogBigdataProducts.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,e=null,s=!1,i=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(i=this.obPopupWin.contentContainer):i=BX(this.visual.BASKET_PROP_DIV),i){if(e=i.getElementsByTagName("select"),e&&e.length)for(t=0;t<e.length;t++)if(!e[t].disabled)switch(e[t].type.toLowerCase()){case"select-one":this.basketParams[e[t].name]=e[t].value,s=!0}if(e=i.getElementsByTagName("input"),e&&e.length)for(t=0;t<e.length;t++)if(!e[t].disabled)switch(e[t].type.toLowerCase()){case"hidden":this.basketParams[e[t].name]=e[t].value,s=!0;break;case"radio":e[t].checked&&(this.basketParams[e[t].name]=e[t].value,s=!0)}s||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}}},t.JCCatalogBigdataProducts.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),this.product&&this.product.id&&JCCatalogBigdataProducts.productsByRecommendation&&JCCatalogBigdataProducts.productsByRecommendation[this.product.id]&&this.RememberProductRecommendation(JCCatalogBigdataProducts.productsByRecommendation[this.product.id],this.product.id),BX.ajax({method:"POST",dataType:"json",url:this.basketUrl,data:this.basketParams,onsuccess:BX.delegate(this.BasketResult,this)}))},t.JCCatalogBigdataProducts.prototype.RememberRecommendation=function(t,e){var s=BX.findParent(t,{className:"bigdata_recommended_products_items"}),i=BX.findChild(s,{attr:{name:"bigdata_recommendation_id"}},!0).value;this.RememberProductRecommendation(i,e)},t.JCCatalogBigdataProducts.prototype.RememberProductRecommendation=function(t,e){var s,i=BX.cookie_prefix+"_RCM_PRODUCT_LOG",o=getCookie(i),a=!1,r=[];o&&(r=o.split("."));for(var h=r.length;h--;)s=r[h].split("-"),s[0]==e?(s=r[h].split("-"),s[1]=t,s[2]=BX.current_server_time,r[h]=s.join("-"),a=!0):BX.current_server_time-s[2]>2592e3&&r.splice(h,1);a||r.push([e,t,BX.current_server_time].join("-"));var n=r.join("."),u=new Date((new Date).getTime()+31536e7);document.cookie=i+"="+n+"; path=/; expires="+u.toUTCString()+"; domain="+BX.cookie_domain},t.JCCatalogBigdataProducts.prototype.Basket=function(){var t="";if(this.canBuy)switch(this.productType){case 1:case 2:this.basketData.useProps&&!this.basketData.emptyProps?(this.InitPopupWindow(),this.obPopupWin.setTitleBar({content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:BX.message("CBD_TITLE_BASKET_PROPS")})}),BX(this.visual.BASKET_PROP_DIV)&&(t=BX(this.visual.BASKET_PROP_DIV).innerHTML),this.obPopupWin.setContent(t),this.obPopupWin.setButtons([new e({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CBD_BTN_MESSAGE_SEND_PROPS"),events:{click:BX.delegate(this.SendToBasket,this)}})]),this.obPopupWin.show()):this.SendToBasket();break;case 3:this.SendToBasket()}},t.JCCatalogBigdataProducts.prototype.BasketResult=function(t){var s="",i="",o="",a=!0,r=[];if(this.obPopupWin&&this.obPopupWin.close(),"object"!=typeof t)return!1;if(a="OK"===t.STATUS){switch(BX.onCustomEvent("OnBasketChange"),i=this.product.name,this.productType){case 1:case 2:o=this.product.pict.SRC;break;case 3:o=this.offers[this.offerNum].PREVIEW_PICTURE?this.offers[this.offerNum].PREVIEW_PICTURE.SRC:this.defaultPict.pict.SRC}s='<div style="width: 96%; margin: 10px 2%; text-align: center;"><img src="'+o+'" height="130" style="max-height:130px"><p>'+i+"</p></div>",r=[new e({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CBD_BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("CBD_BASKET_URL")},this)}})]}else s=t.MESSAGE?t.MESSAGE:BX.message("CBD_BASKET_UNKNOWN_ERROR"),r=[new e({ownerClass:this.obProduct.parentNode.parentNode.parentNode.className,text:BX.message("CBD_BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})];this.InitPopupWindow(),this.obPopupWin.setTitleBar({content:BX.create("div",{style:{marginRight:"30px",whiteSpace:"nowrap"},text:a?BX.message("CBD_TITLE_SUCCESSFUL"):BX.message("CBD_TITLE_ERROR")})}),this.obPopupWin.setContent(s),this.obPopupWin.setButtons(r),this.obPopupWin.show()},t.JCCatalogBigdataProducts.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogSectionBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:{top:"10px",right:"10px"}}))}}}(window),BX.addCustomEvent("onSlideInit",function(t){try{if(ignoreResize.push(!0),t){var e=t.slider;if(e&&e.hasClass("content_inner")&&void 0==$(".all_wrapp .content_inner").attr("data-hover")){var s=0;$(document).find(".all_wrapp .content_inner .footer_button").length&&($(document).find(".all_wrapp .content_inner .footer_button").css("height","auto"),s=$(document).find(".all_wrapp .content_inner .footer_button").height(),$(document).find(".all_wrapp .content_inner .footer_button").css("height",""));var i=1*$(".all_wrapp").height()+20,o=i+s+5;$(".all_wrapp .content_inner .slides").equalize({children:".item-title"}),$(".all_wrapp .content_inner .slides").equalize({children:".item_info"}),$(".all_wrapp .content_inner .slides").equalize({children:".catalog_item"}),$(".all_wrapp .content_inner").attr("data-unhover",i),$(".all_wrapp .content_inner").attr("data-hover",o),$(".all_wrapp").height(i),$(".all_wrapp .content_inner").addClass("absolute"),$(".content_inner .tabs_slider > li").hover(function(){var t=1*$(this).closest(".content_inner").attr("data-hover");$(this).closest(".content_inner").fadeTo(100,1),$(this).closest(".content_inner").stop().css({height:t}),$(this).closest(".flex-viewport").stop().css({height:t})},function(){var t=1*$(this).closest(".content_inner").attr("data-unhover");$(this).closest(".content_inner").stop().animate({height:t},100),$(this).closest(".flex-viewport").stop().animate({height:t},100)})}}}catch(a){}finally{ignoreResize.pop()}});